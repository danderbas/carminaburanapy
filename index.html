<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>Carmina Burana</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div id="portada">
		<div class="titulo">
			<h1>CARMINA BURANA</h1>
			<em>
				CANTIONES PROFANAE CANTORIBUS ET CHORIS CANTANDAE COMITANTIBUS INSTRUMENTIS ATQUE IMAGINIBUS MAGICIS
			</em>
		</div>
		<div class="links">
			<a href="#intro">La obra</a>
			<a href="#letra">Letras y traducciones</a>
		</div>

		<!--
		<div>
			<figure>
				<img src="rotafortunae.jpg" alt="Rueda de la fortuna"/>
				<figcaption class="footnote">
					Rota fortunae (rueda de la fortuna).<br>
					<span style="font-size: small">En la filosofía medieval y antigua, simboliza la naturaleza caprichosa del Destino. La rueda pertenece a la diosa Fortuna, que la hace girar al azar, cambiando las posiciones de quienes están en la rueda: algunos sufren grandes desgracias, otros obtienen ganancias inesperadas.</span>
				</figcaption>
			</figure>
		</div>
		-->
	</div>

	<div id="intro">
		<p>Carmina Burana: <em>cantiones profanae cantoribus et choris cantandae comitantibus instrumentis atque imaginibus magicis</em> <span style="font-size: smaller">(canciones laicas para cantantes y coreutas para ser cantadas junto a instrumentos e imágenes mágicas)</span> es una cantata escénica compuesta por Carl Orff entre 1935 y 1936.</p>

		<p>Se basa en 24 poemas del "Carmina Burana" ("Canciones de Benediktbeuen"): un manuscrito de 254 poemas y textos dramaticos. Escrito en lenguas medievales -principalmente Latin, ademas de Aleman (Alto Aleman Medio) y Frances Antiguo (Arpitano)-, proviene en su mayor parte de los siglos XI y XII.</p>

		<figure>
			<img src="carminaburana.jpg" alt="Carmina Burana, manuscrito"/>
			<figcaption class="footnote">Pagina del manuscrito original<br><!--<span style="font-size: small">Abajo se lee "O fortuna, velut luna, statu variabilis..."</span>--></figcaption>
		</figure>

		<p>La seleccion cubre un amplio rango de temas: la inconstancia de la fortuna y la riqueza, la naturaleza efimera de le vida, la alegria por el regreso de la primavera y los placeres -y peligros- de la bebida, la glotoneria, el juego y la lujuria.</p>

		<figure>
					<img src="rotafortunae.jpg" alt="Rueda de la fortuna"/>
					<figcaption class="footnote">
						Rota fortunae (rueda de la fortuna)<br>
						<span style="font-size: small">En la filosofía medieval y antigua, simboliza la naturaleza caprichosa del Destino. La rueda pertenece a la diosa Fortuna, que la hace girar al azar, cambiando las posiciones de quienes están en la rueda: algunos sufren grandes desgracias, otros obtienen ganancias inesperadas.</span>
					</figcaption>
		</figure>

		<p>El compositor, en su intención de escenificar la obra con danza, coreografía, diseño visual y otras acciones escénicas, la describiria como una "cantata escenica". Orff suscribia un concepto dramático llamado "Theatrum Mundi": en e'l, la música, el movimiento y la voz eran inseparables.<br><span style="font-size: smaller">La fórmula artística de Orff limitaba la música en el sentido de que cada momento musical debía estar conectado con una acción en el escenario. Es aquí donde las interpretaciones modernas de Carmina Burana a menudo no cumplen con las intenciones de Orff.</span></p>
	</div>

	<div id="letra">
		<ul>
			<li class="seccion">Fortuna Imperatrix Mundi<br><span class="traduccion">Fortuna, emperatriz del mundo</span>
			</li>
				<ul>
					<li><a href="#l0">O Fortuna</a></li>
					<li><a href="#l1">Fortune plango vulnera</a></li>
				</ul>
			<li class="seccion">Primo vere<br><span class="traduccion">En primavera</span>
			</li>
				<ul>
					<li><a href="#l2">Veris leta facies</a></li>
					<li><a href="#l3">Omnia Sol temperat</a></li>
					<li><a href="#l4">Ecce gratum</a></li>
				</ul>
			<li class="seccion">Uf dem anger<br><span class="traduccion">En la pradera</span>
			</li>
				<ul>
					<li>Tanz</li>
					<li class="disabled">Floret silva nobilis</li>
					<li><a href="#l5">Chramer, gip die varwe mir</a></li>
					<li>Reie</li>
					<li><a href="#l6">Swaz hie gat umbe</a></li>
					<li><a href="#l7">Were diu werlt alle min</a></li>
				</ul>
			<li class="seccion">In taberna<br><span class="traduccion">En la taberna</span>
			</li>
				<ul>
					<li class="disabled">Estuans interius</li>
					<li><a href="#l8">Olim lacus colueram</a></li>
					<li><a href="#l9">Ego sum abbas</a></li>
					<li><a href="#l10">In taberna quando sumus</a></li>
				</ul>
			<li class="seccion">Cour d'amours<br><span class="traduccion">La corte del amor</span>
			</li>
				<ul>
					<li><a href="#l11">Amor volat undique</a></li>
					<li class="disabled">Dies, nox et omnia</li>
					<li><a href="#l12">Stetit puella</a></li>
					<li class="disabled">Circa mea pectora</li>
					<li class="disabled">Si puer cum puellula</li>
					<li><a href="#l13">Veni, veni, venias</a></li>
					<li><a href="#l14">In trutina</a></li>
					<li><a href="#l15">Tempus est iocundum</a></li>
					<li><a href="#l16">Ave formosissima</a></li>
				</ul>
		</ul>
	</div>

	<div id="letras">
		<p style="text-align: center">Cargando letras...</p>
	</div>

	<script type="text/javascript" src="lyrics.js"></script>
	<script>
		function displayLyrics() {
			let out = document.getElementById("letras");

			let n = letras.length;

		  let output = "";
			for (let i=0; i<n; i++) {
				let titulo = letras[i]["titulo"];
				let comentarios = letras[i]["comentarios"];
				let letra = letras[i]["letra"];

				// 0 for original, 1 for translation
					output += "<div id=\"l"+i+"\">"
							+ "<h3><table><tr><td>"+titulo[0].toUpperCase()+"</td><td>"+titulo[1]+"</td></tr></table></h3>"
							+ "<table>"
							+ letra.map(s => "<tr><td>"+s[0].replace(/\n/g,"<br>").toUpperCase()+"</td><td>"
											+s[1].replace(/\n/g,"<br>")+"</td></tr>")
								.reduce((c,a) => c+a, "")
							+ "</table>"
							+ (comentarios ? "<p class=\"comentario\">"+comentarios+"</p>" : "")
					+ "<a href=\"#letra\">volver</a></div>";
			}
			out.innerHTML = output;
		}

		function addDivScrolling() {
			let portada = document.getElementById('portada');
			portada.addEventListener('scroll', () => {
				var scrollTop = portada.scrollTop;
				var scrollHeight = portada.scrollHeight;
				var clientHeight = portada.clientHeight;

				console.log({scrollTop, scrollHeight, clientHeight});

				if (scrollTop + clientHeight >= scrollHeight) {
					document.getElementById('intro').classList.remove('hidden');
					document.getElementById('portada').classList.add('hidden');
				}
			});
		}

		function loadFunctions() {
			var hora = (new Date()).getHours();
			if (20 <= hora && hora <= 21) {
				document.body.innerHTML = "<div style=\"display: flex; justify-content: center; align-content: center; min-height: 100vh; flex-direction: column; text-align: center;\">Es momento de ver la obra</div>";
			} else {
				displayLyrics();
			}
			//addDivScrolling();
		}

		window.onload = loadFunctions;
	</script>

	</body>
</html>

